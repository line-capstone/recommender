# 연관성 분석의 절차

## 첫 번째 단계, 적절한 품목의 선택

* 어떤 품목을 선택할 것인지는 전적으로 분석의 목적에 달려 있다. 즉, 분석 전에 **분석의 목적**이 무엇인지를 정하는 것이 중요하다.
* 예를 들어, 대형 할인점에서는 술을 하나의 상위 품목으로 고려할 수 있다. 
* 그러나 어떤 경우에는 소주, 양주, 맥주, 포도주, 막걸리 등으로 세분화할 수 있다.
* 여기서 더 세분화한다면, 포도주를 적포도주와 백포도주로 분류할 수 있고 또, 제조사를 기준으로 분류할 수도 있다.
* 참고: apriori 알고리즘

### 품목을 단순화/세분화하는 이유

* 연관성 분석은 **각 품목들의 거래횟수가 비슷한 경우에 효율적으로 수행**될 수 있다. 
  * 따라서 거래횟수가 비교적 적은 품목은 상위수준의 분류체계를 사용하고 
  * 거래 횟수가 많은 품목은 세분화하여 거래횟수를 줄이는 방법을 사용한다.

### 품목의 단순화

* 탐색해야 할 규칙의 수는 고려되는 품목의 수에 따라 지수적으로 증가한다. 따라서, 품목을 단순화하면, 탐색해야 할 규칙의 수가 줄어든다.
* 품목의 분류를 상위수준으로 일반화하여 품목의 수를 줄일 수 있다. 즉, 모든 종류의 술을 하나의 품목으로 분석하는 것이다.
* 또, 가상 품목을 지정할 수도 있다. 예를 들어 디자이너 레벨\(Calvin Klein\), 저지방과 무지방 제품, 에너지 절약형 옵션, 현금 또는 신용카드 등이 있다. 하지만, 이러한 가상 품목의 지정은 품목의 개수를 지나치게 많게 할 수 있는 위험이 있다. 따라서 가상품목을 지정할 땐 신중하게 해야 한다.

### 품목의 세분화

* 품목을 세분화하면, 결과의 활용성이 높아진다. 예를 들면, 특정한 상표의 술에 대한 정보는 그 회사의 미래 마케팅 전략에 사용될 수 있다.
* 세분화할 땐, 일반적으로 일차단계에서 상위수준의 품목 분류를 이용하여 규칙을 찾은 후, 이를 바탕으로 세분화된 품목으로 분석을 진행시켜 나간다.

## 두 번째 단계, 연관규칙 탐색

* 연관규칙의 표현방법도 중요하다. 아래에서 2번보다 1번처럼 표현하는 것이 유익하다
  * 1. "아기 기저귀와 목요일이 주어지면, 맥주가 결과"
    2. "목요일이면 아기 기저귀와 맥주"
* 향상도가 1보다 작은 경우, 결과를 역으로 나타내는 것이 좋다.
* 시차에 따라 이루어지느 구매에서는 시차 연관성분석을 하는 것이 바람직핟하.
* **주의**: 만약 음의 상관관계가 나온 경우, 일단 판단을 보류하는 것이 좋다. 여러개의 변수가 동시에 음의 상관관계를 갖는 경우는 많지 않다. 또, 음의 상관관계를 갖고 있는 경우 해석이 어렵다는 단점이 있다.

## 세 번째 단계, 현실적 문제의 해결

* 연관성분석은 품목의 수가 증가하면, 계산량이 기하급수적으로 증가한다.
* 이것을 해결하기 위한 방법으로 가지치기\(pruning\)을 이용하여 불필요한 부분을 간략하게 한다.
  * 가지치기: 각 단계에서 문턱기준\(threshold criterion\)을 만족하지 못하는 조합을 버리는 것이다.
* 가장 보편적인 가지치기방법은 최소지지도 가지치기\(Minimum Support Pruning, MSP\)이다.
* 즉, 지지도가 문턱기준보다 작은 품목의 조합은 더이상 품목을 추가하지 않는다.

